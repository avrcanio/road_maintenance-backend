{% load i18n l10n %}
<div class="roadsection-widget" data-field-id="{{ id }}" data-module="{{ module }}" data-fullscreen-url="{{ fullscreen_url }}">
    <div id="{{ id }}_div_map" class="dj_map_wrapper">
        <div id="{{ id }}_map" class="dj_map" style="width: {{ map_width }}px; height: {{ map_height }}px;"></div>
        {% if not disabled %}<span class="clear_features"><a href="">{% translate "Delete all Features" %}</a></span>{% endif %}
        {% if display_raw %}<p>{% translate "Debugging window (serialized value)" %}</p>{% endif %}
        <textarea id="{{ id }}" class="vSerializedField required" cols="150" rows="10" name="{{ name }}"
                  {% if not display_raw %} hidden{% endif %}>{{ serialized }}</textarea>
        <script>
            {% block base_layer %}
                var base_layer = new ol.layer.Tile({
                    source: new ol.source.OSM()
                });
            {% endblock %}
            {% block options %}
                var options = {
                    base_layer: base_layer,
                    geom_name: '{{ geom_type }}',
                    id: '{{ id }}',
                    map_id: '{{ id }}_map',
                    map_srid: {{ map_srid|unlocalize }},
                    name: '{{ name }}',
                    default_lon: {{ default_lon|unlocalize }},
                    default_lat: {{ default_lat|unlocalize }},
                    default_zoom: {{ default_zoom|unlocalize }}
                };
            {% endblock %}
            var {{ module }} = new MapWidget(options);
        </script>
    </div>
    {% if fullscreen_url %}
    <div class="roadsection-widget__actions">
        <button type="button" class="button roadsection-open-fullscreen">{% translate "Otvori kartu u novom prozoru" %}</button>
    </div>
    {% endif %}
</div>
